/**
 * plugin.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2015 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint unused:false */
/*global tinymce:true */

/**
 * Example plugin that adds a toolbar button and menu item.
 */
tinymce.PluginManager.add('new', function(editor) {
    
    function openmanager() {
        var win, data, dom = editor.dom,
            imgElm = editor.selection.getNode();
        var width, height, imageListCtrl;
        win = editor.windowManager.open({
            title: 'File Manager',
            file: tinyMCE.baseURL + '/plugins/new/dialog.php?editor=' + editor.id + '&lang=' + tinymce.settings.language + '&subfolder=' + tinymce.settings.subfolder,
            filetype: 'all',
            classes: 'filemanager',
            width: 900,
            height: 600,
            inline: 1
        })
    }
    editor.addButton('filemanager', {
        icon: 'browse',
        tooltip: 'Insert file',
        onclick: openmanager,
        stateSelector: 'img:not([data-mce-object])'
    });
    editor.addMenuItem('filemanager', {
        icon: 'browse',
        text: 'Insert file',
        onclick: openmanager,
        context: 'insert',
        prependToContext: true
    })
});